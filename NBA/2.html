<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/echarts.js"></script>
    <script src="js/jquery-3.4.1.js"></script>
</head>
<body>
<div id="main2" style="width: 0px;height:0px;background-image: url(img/main_view.png);background-size: cover;"></div>
<div id="main1" style="width: 80vh;height:8vh;"></div>
<div id="main3" style="width:300px;height:300px;"></div>

</body>
<script>
    var myChart = echarts.init(document.getElementById('main1'));
    var myChart1 = echarts.init(document.getElementById('main2'));
    var myChart2 = echarts.init(document.getElementById('main3'));

    var dataset=[
        {"name":"詹姆斯","position":[4,6],"team":"骑士","time":11.31},
        {"name":"库里","position":[2,5],"team":"勇士","time":10.28},
        {"name":"杜兰特","position":[5,3],"team":"勇士","time":8.54},
        {"name":"格林","position":[7,9],"team":"勇士","time":7.41},
        {"name":"伊戈达拉","position":[2,1],"team":"勇士","time":7.21},
        {"name":"汤普森","position":[10,3],"team":"勇士","time":6.32},
        {"name": "JR史密斯","position":[5,1],"team":"骑士","time":6.13},
        {"name":"乐福","position":[6,8],"team":"骑士","time":5.22},
        {"name":"香波特","position":[9,0],"team":"骑士","time":5.10},
        {"name":"琼斯","position":[5,4],"team":"骑士","time":4.37},
        {"name":"钱宁","position":[7,4],"team":"骑士","time":3.32},
        {"name":'利文斯顿',"position":[10,7],"team":"勇士","time":1.31}
    ];
    var tim=11.31;
    var listqi=[];<!--区分骑士勇士数据-->
    var listyong=[];
    var flag;<!--区分当前添加的是骑士还是勇士数据-->
    if(dataset[0].team=="骑士") {
        flag=1;
        listqi.push(dataset[0].position)
    }
    else{
        flag=0;
        listyong.push(dataset[0].position)
    }

    var test=[(flag==1?listqi[0]:listyong[0])];
    console.log(test);


    option = {
        timeline: {
            type: 'number',
            data: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
            label: {
                formatter: function (v) {
                    return '00:' + (v > 10 ? v : ('0' + v))
                }
            },
            autoPlay: false,

            x: '0%',
            x2: '3%',
            y: '18%',
        }
    };
    option1 = {
        xAxis: {
            min:0,
            max:15,
            show:false,
            splitLine:{
                show:false
            }
        },
        yAxis: {
            min:0,
            max:15,
            show:false,
            splitLine:{
                show:false
            }
        },
        series: [
            {
                type: 'effectScatter',
                symbolSize: 20,
                data: test,
                itemStyle : {
                    normal: {
                        color: 'purple',
                        opacity:1,
                        lineStyle: {
                            type: 'solid'
                        },
                        label:{show:false}
                    }
                },
            },
            {
                name:(flag==1?"骑士":"勇士"),
                symbolSize: 20,
                data: test,
                itemStyle : {
                    normal: {
                        borderWidth:1,
                        color: (flag==1?"red":"blue"),
                        opacity:1,
                        lineStyle: {
                            type: 'solid'
                        },
                        label:{show:false}
                    }
                },
                type: 'scatter'
            },
        ]
    };
    var ind=0;
    myChart.on('timelinechanged', function(timelineIndex){
        console.log(timelineIndex.currentIndex);
        var arrIndex= parseInt(timelineIndex.currentIndex);
        myChart1.clear();
        myChart2.clear();
        test=[];
        tim=dataset[arrIndex].time;
        console.log("time:"+tim);
        if(arrIndex<ind&&arrIndex!=0){//往回倒
            if(dataset[arrIndex+1].team=="骑士") {
                listqi.pop();
                test.push(dataset[arrIndex].position)

            }
            else{
                listyong.pop();
                test.push(dataset[arrIndex].position)
            }
        }
        else{
            if(arrIndex==11&&ind==0){
                listqi=[];listyong=[];
                test=dataset[dataset.length-1].position;
                flag=(dataset[dataset.length-1].team=="骑士"?1:0);
                for(let temp in dataset){
                    if(dataset[temp].team=="骑士")listqi.push(dataset[temp].position);
                    else listyong.push(dataset[temp].position);
                }
            }
            else{
                if(arrIndex==0){
                    listqi=[];
                    listyong=[];
                }
                test.push(dataset[arrIndex].position);
                if(dataset[arrIndex].team=="骑士") {
                    flag=1;
                    listqi.push(dataset[arrIndex].position)
                }
                else{
                    flag=0;
                    listyong.push(dataset[arrIndex].position)
                }
            }

        }
        ind=arrIndex;
        console.log("test:"+test);

        option1 = {
            xAxis: {
                min:0,
                max:15,
                show:false,
                splitLine:{
                    show:false
                }
            },
            yAxis: {
                min:0,
                max:15,
                show:false,
                splitLine:{
                    show:false
                }
            },
            series: [{
                type: 'effectScatter',
                symbolSize: 20,
                color:'purple',
                data: test,
            },
                {
                    name:"骑士",
                    symbolSize: 20,
                    data: listqi,
                    itemStyle : {
                        normal: {
                            borderWidth:1,
                            color: "red",
                            opacity:1,
                            lineStyle: {
                                type: 'solid'
                            },
                            label:{show:false}
                        }
                        },
                    type: 'scatter'
                },
                {
                    name:"勇士",
                    symbolSize: 20,
                    data: listyong,
                    itemStyle : {
                        normal: {
                            borderWidth:1,
                            color: "blue",
                            opacity:1,
                            lineStyle: {
                                type: 'solid'
                            },
                            label:{show:false}
                        }
                    },
                    type: 'scatter'
                }]
        };
        option2 = {
            title: {
                text: '\n单场比赛时间进度',
                x:'center',
                textStyle:{
                    fontSize: 20,color:'black',
                }
            },
            tooltip: {
                formatter: "{a} <br/>{c} {b}"
            },
            x:'10%',
            series : [
                {
                    center:["50%","66%"],
                    name: '比赛时间',
                    type: 'gauge',
                    z: 3,
                    min: 0,
                    max: 12,
                    splitNumber: 12,
                    radius: '85%',
                    axisLine: {            // 坐标轴线
                        lineStyle: {       // 属性lineStyle控制线条样式
                            width: 8,
                            color: [[0.2, '#3434c2'], [0.8, '#d58100'], [1, '#c72800']]
                        },
                    },
                    axisTick: {            // 坐标轴小标记
                        length: 11,        // 属性length控制线长
                        lineStyle: {       // 属性lineStyle控制线条样式
                            color: 'auto'
                        }
                    },
                    splitLine: {           // 分隔线
                        length: 13,         // 属性length控制线长
                        lineStyle: {       // 属性lineStyle（详见lineStyle）控制线条样式
                            color: 'auto'
                        }
                    },
                    axisLabel: {
                        textStyle:{
                            fontWeight:'bold',
                        },
                    },
                    title: {
                        // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                        fontWeight: 'bolder',
                        fontSize: 15,
                    },
                    detail: {
                        // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                        formatter: function (value) {
                            value = (value + '').split('.');
                            value.length < 2 && (value.push('00'));
                            return ('00' + value[0]).slice(-2)
                                + '.' + (value[1] + '00').slice(0, 2);
                        },
                        fontWeight: 'bolder',
                        borderRadius: 3,
                        backgroundColor: '#444',
                        borderColor: '#aaa',
                        shadowBlur: 5,
                        shadowColor: '#333',
                        shadowOffsetX: 0,
                        shadowOffsetY: 3,
                        borderWidth: 2,
                        textBorderColor: '#000',
                        textBorderWidth: 2,
                        textShadowBlur: 2,
                        textShadowColor: '#fff',
                        textShadowOffsetX: 0,
                        textShadowOffsetY: 0,
                        fontFamily: 'Arial',
                        width: 30,
                        color: '#eee',
                        fontSize:10,
                        rich: {}
                    },
                    data: [{value: tim, name: '比赛进度'}]
                }
            ]
        };

        myChart1.setOption(option1);
        myChart2.setOption(option2);

    });

    option2 = {
        title: {
            text: '\n单场比赛时间进度',
            x:'center',
            textStyle:{
                fontSize: 20,color:'black',
            }
        },
        tooltip: {
            formatter: "{a} <br/>{c} {b}"
        },
        x:'10%',
        series : [
            {
                center:["50%","66%"],
                name: '比赛时间',
                type: 'gauge',
                z: 3,
                min: 0,
                max: 12,
                splitNumber: 12,
                radius: '85%',
                axisLine: {            // 坐标轴线
                    lineStyle: {       // 属性lineStyle控制线条样式
                        width: 8,
                        color: [[0.2, '#3434c2'], [0.8, '#d58100'], [1, '#c72800']]
                    },
                },
                axisTick: {            // 坐标轴小标记
                    length: 11,        // 属性length控制线长
                    lineStyle: {       // 属性lineStyle控制线条样式
                        color: 'auto'
                    }
                },
                splitLine: {           // 分隔线
                    length: 13,         // 属性length控制线长
                    lineStyle: {       // 属性lineStyle（详见lineStyle）控制线条样式
                        color: 'auto'
                    }
                },
                axisLabel: {
                    textStyle:{
                        fontWeight:'bold',
                    },
                },
                title: {
                    // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                    fontWeight: 'bolder',
                    fontSize: 15,
                },
                detail: {
                    // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                    formatter: function (value) {
                        value = (value + '').split('.');
                        value.length < 2 && (value.push('00'));
                        return ('00' + value[0]).slice(-2)
                            + '.' + (value[1] + '00').slice(0, 2);
                    },
                    fontWeight: 'bolder',
                    borderRadius: 3,
                    backgroundColor: '#444',
                    borderColor: '#aaa',
                    shadowBlur: 5,
                    shadowColor: '#333',
                    shadowOffsetX: 0,
                    shadowOffsetY: 3,
                    borderWidth: 2,
                    textBorderColor: '#000',
                    textBorderWidth: 2,
                    textShadowBlur: 2,
                    textShadowColor: '#fff',
                    textShadowOffsetX: 0,
                    textShadowOffsetY: 0,
                    fontFamily: 'Arial',
                    width: 30,
                    color: '#eee',
                    fontSize:10,
                    rich: {}
                },
                data: [{value: tim, name: '比赛进度'}]
            }
        ]
    };


    myChart.setOption(option);
    myChart1.setOption(option1);
    myChart2.setOption(option2)


</script>
</html>